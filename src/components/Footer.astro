---
import Logo from '../svg/logo_big.svg';
import LogoSmall from '../svg/logo_small.svg';
import { Icon } from 'astro-icon/components';
import { getCatalogLinks, getNavigationLinks } from '../utils/productUtils';
import ModelsRow from './ModelsRow.astro';
import type { Link } from '../types/common';
interface FooterProps {
  links: { href: string; text: string }[];
}

const {class:className} = Astro.props;
const logoSrc = 'https://flowbite.com/docs/images/logo.svg';
const logoAlt = 'Heaton Logo';
const brandName = 'Heaton';
const copyrightText = '© 2025';
const copyrightLink = { href: 'https://heaton.ru/', text: 'Heaton' };

const currentURL = new URL(Astro.request.url).pathname;
const mainpage = currentURL==="/";
const catalogLinks = await getCatalogLinks();
const mainLinks = [
                    {text:"Документация",href:`${import.meta.env.BASE_URL}/Документация`},
                    {text:"Контакты",href:`${import.meta.env.BASE_URL}/Контакты`},
                    {text:"Где купить",href:`${import.meta.env.BASE_URL}/Где купить`},
                  ]
---

<footer class="bg-neutral-50 shadow-[0_35px_60px_-15px_rgba(0,0,0,0.3)] bg-primary" class:list={className}>
  <div class="w-full container-center  min-h-[20svh] mx-auto p-4 md:py-8 text-neutral-500 flex flex-col">
    <div class="pt-16 sm:flex sm:items-start sm:justify-between">
      
        <div class="flex items-center gap-4 text-neutral-50/60">
            <a href={`${import.meta.env.BASE_URL}/`} class="cursor-pointer " class:list={[{"pointer-events-none":mainpage}]}>
              <Logo class="hidden w-20 md:w-32 lg:w-40 md:block "/>
              <LogoSmall class="w-16 md:hidden "/>
            </a>
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-2 ">
                    <Icon name="Phone call" />
                    <div class="relative text-base font-semibold leading-5 tracking-wider">8 499 645-00-00</div>
                </div>
                <div class="flex items-center gap-2 ">
                    <Icon name="At sign" />
                    <div class="relative text-base font-semibold leading-5 tracking-wider">retail@heaton.ru</div>
                </div>
            </div>
        </div>
        
        <div   class="text-neutral-50/80 my-4">
          <h5 class="text-sm md:text-base font-black uppercase">Каталог продукции:</h5>
          <ul >
            {
              catalogLinks.map((element:Link)=>(
                  <li class="pl-0 my-1 md:my-2">
                    <a href={element.url} class="flex-row  pointer-events-auto cursor-pointer">
                      {/* <Icon name="At sign" class="size-6"/> */}
                      <span class="whitespace-nowrap block text-xs md:text-base uppercase">{element.text}</span>
                    </a>
                    <ModelsRow links={element.links} class="pl-2" data-small data-simple/>
                  </li>
                ))
            }
          </ul>
        </div>
      <ul class="flex flex-wrap flex-col mb-6 text-sm md:text-base font-black uppercase sm:mb-0 text-neutral-50/60">
        {mainLinks.map((name) => (
          <li>
            <a href={name.href} class="hover:underline me-4 md:me-6">{name.text}</a>
          </li>
        ))}
      </ul>
    </div>
  </div>
  <div class="mt-auto text-neutral-50/60">
    <hr class=" sm:mx-auto border-neutral-300" />
    <span class="block py-8 text-sm sm:text-center">
      {copyrightText} <a href={copyrightLink.href} class="hover:underline">{copyrightLink.text}</a>
    </span>
  </div>
</footer>
